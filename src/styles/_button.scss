button:not([role="switch"]) {
  background: var(--color-content);
  color: var(--color-content-text);
  border: solid 1px var(--color-content-border);
  padding-inline: var(--spacing-4);
  padding-block: var(--spacing-2);
  border-radius: var(--border-radius-large);
  font-size: var(--font-size-2);
  line-height: var(--line-height-2);
  cursor: pointer;
  outline-color: var(--color-primary);
  white-space: nowrap;

  &:hover {
    background: var(--color-content-hover);
    border-color: var(--color-content-hover-border);
    color: var(--color-content-hover-text);
  }

  &:active {
    background: var(--color-content);
    color: var(--color-content-text);
    border-color: var(--color-content-border);
  }

  &[aria-expanded] {
    display: flex;
    gap: var(--spacing-1);
    flex-wrap: nowrap;
    align-items: center;
    position: relative;

    &::after {
      content: '';
      background-color: currentColor;
      inline-size: 0.5em;
      block-size: 0.3em;
      display: inline-block;
      clip-path: polygon(0% 0%, 50% 100%, 100% 0%);
      transition: transform var(--transition-time-quick);
    }
  }

  &[aria-expanded="true"] {
    border-bottom: 0;
    border-end-start-radius: 0;
    border-end-end-radius: 0;

    &:hover {
      background: var(--color-content);
      color: var(--color-content-text);
      border-color: var(--color-content-border);
    }

    &::after {
      transform: rotate(180deg);
    }

    &::before {
      content: '';
      position: absolute;
      background-color: var(--color-content);
      border-inline-start: solid 1px var(--color-content-border);
      border-inline-end: solid 1px var(--color-content-border);
      inset-inline-start: -1px;
      inset-inline-end: -1px;
      inset-block-start: 100%;
      inline-size: 100%;
      block-size: var(--spacing-1);
      z-index: 3;
    }
  }
}

app-action-button:has([aria-expanded="false"]) + * {
  display: none;
}

@media (prefers-reduced-motion) {
  button:not([role="switch"])[aria-expanded]::after {
    transition: none;
  }
}